name: Diagnostic Check

on: [workflow_dispatch]

jobs:
  diagnose:
    runs-on: ubuntu-latest
    steps:
      - name: Check APP_ENV
        if: ${{ vars.APP_ENV == '' }}
        run: echo "ðŸ›‘ ::error::APP_ENV is not set!"

      - name: Check API_KEY
        run: |
          if [ -z "API_KEY"]; then
            echo "ðŸ›‘ ::error::API_KEY is not set!"
          fi

      - name: Generate Summary
        run: |
          echo "### ðŸ”§ Diagnostic" >> $GITHUB_STEP_SUMMARY
          echo "- APP_ENV: ${APP_ENV:-âŒ Not defined}" >> $GITHUB_STEP_SUMMARY
          if [ -n "$API_KEY" ]; then
            echo "- API_KEY: âœ… Present" >> $GITHUB_STEP_SUMMARY
          else
            echo "- API_KEY: âŒ Not defined" >> $GITHUB_STEP_SUMMARY
          fi